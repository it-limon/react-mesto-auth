{"version":3,"sources":["contexts/AppContext.js","components/Card.js","images/header-logo.svg","utils/constants.js","components/HeaderMenu.js","components/Header.js","components/Footer.js","components/Main.js","components/ImagePopup.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","images/res-success.svg","images/res-failure.svg","components/InfoTooltip.js","utils/auth.js","components/Register.js","components/Login.js","components/ProtectedRoute.js","utils/api.js","components/App.js","index.js"],"names":["AppContext","createContext","Card","props","data","name","link","likes","owner","currentUser","useContext","isOwn","_id","isLiked","some","like","className","src","alt","onClick","onCardClick","type","onCardLike","aria-label","length","onCardDelete","authOptions","baseUrl","appRoutes","HeaderMenu","hst","useHistory","user","handleLogout","isMobile","isInactive","loggedIn","email","localStorage","removeItem","push","location","pathname","to","Header","useState","isActiveMenu","setIsActiveMenu","window","innerWidth","setIsMobile","resizeWindow","useCallback","isMobileNew","useEffect","addEventListener","removeEventListener","headerLogo","Footer","Date","getFullYear","Main","cards","onEditProfile","onAddCard","onEditAvatar","avatar","about","map","card","ImagePopup","onClose","PopupWithForm","isOpen","onSubmit","title","btnSubmitCaption","children","EditProfilePopup","onUpdateUser","setName","description","setDescription","evt","preventDefault","value","onChange","target","placeholder","minLength","maxLength","required","EditAvatarPopup","onUpdateAvatar","avatarRef","useRef","current","ref","AddPlacePopup","setLink","InfoTooltip","isError","resFailure","resSuccess","options","authorize","password","_promiseHandler","fetch","method","headers","body","JSON","stringify","getContent","token","this","_baseUrl","promise","then","res","ok","json","Promise","reject","status","Register","showInfoToolTip","registerData","setRegisterData","handleChange","auth","register","catch","Login","handleLogin","loginData","setLoginData","setItem","ProtectedRoute","Component","component","otherProps","_headers","cardId","authorization","App","setCurrentUser","setCards","isPopupProfileOpen","setIsPopupProfileOpen","isPopupCardOpen","setIsPopupCardOpen","isPopupAvatarOpen","setIsPopupAvatarOpen","isInfoTooltipOpen","setIsInfoTooltipOpen","selectedCard","setSelectedCard","setLoggedIn","setIsError","closeAllPopups","loadData","jwt","getItem","promises","api","getUserInfo","getInitialCards","all","authInfo","userInfo","initialCards","Provider","exact","path","changeCardLikeStatus","newCard","currCard","err","console","log","deleteCard","filter","setUserInfo","addCard","setUserAvatar","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"wOAEaA,EAAaC,0B,OCmDXC,MAjDf,SAAcC,GAAQ,IAAD,EAMfA,EAAMC,KAJRC,EAFiB,EAEjBA,KACAC,EAHiB,EAGjBA,KACAC,EAJiB,EAIjBA,MACAC,EALiB,EAKjBA,MAGIC,EAAcC,qBAAWV,GAAYS,YAErCE,EAAQH,EAAMI,MAAQH,EAAYG,IAClCC,EAAUN,EAAMO,MAAK,SAAAC,GAAI,OAAIA,EAAKH,MAAQH,EAAYG,OAM5D,OACE,qBAAII,UAAU,cAAd,UACE,qBAAKA,UAAU,eAAeC,IAAKX,EAAMY,IAAKb,EAAMc,QANhC,kBAAMhB,EAAMiB,YAAY,CAAEf,OAAMC,YAOpD,oBAAIU,UAAU,eAAd,SAA8BX,IAC5B,sBAAKW,UAAU,wBAAf,UACE,wBACEA,UAAS,6BAAwBH,EAAU,6BAA+B,IAC1EQ,KAAK,SACLF,QAXc,kBAAMhB,EAAMmB,WAAWnB,EAAMC,OAY3CmB,aAAW,+CAGb,sBAAMP,UAAU,sBAAhB,SAAuCT,EAAMiB,YAEhDb,GACC,wBACEK,UAAU,8BACVK,KAAK,SACLF,QApBkB,kBAAMhB,EAAMsB,aAAatB,EAAMC,OAqBjDmB,aAAW,mDCxCN,MAA0B,wCCQ5BG,EAAc,CACzBC,QAAS,iCAGEC,EACL,IADKA,EAEH,WAFGA,EAGH,WCsCKC,EA/CI,SAAC1B,GAClB,IAAM2B,EAAMC,cACNC,EAAOtB,qBAAWV,GAAYS,YAC9BwB,EAAevB,qBAAWV,GAAYiC,aAEpCC,EAAmC/B,EAAnC+B,SAAUC,EAAyBhC,EAAzBgC,WAAYC,EAAajC,EAAbiC,SAQ9B,OACE,sBACEpB,UAAS,sBACPmB,GAAcD,EAAW,yBAA2B,IAD7C,OAENA,EAAW,uBAAyB,IAHzC,UAKGE,GAAY,oBAAIpB,UAAU,uBAAd,SAAsCgB,EAAKK,QACxD,oBAAIrB,UAAU,qBAAd,SACGoB,EACC,6BAAI,wBAAQpB,UAAU,6CAA6CG,QAf3D,WACdmB,aAAaC,WAAW,OACxBN,IACAH,EAAIU,KAAKZ,IAYC,8CACFE,EAAIW,SAASC,WAAad,EAC5B,6BACE,cAAC,IAAD,CAAMZ,UAAU,yBAAyB2B,GAAIf,EAA7C,kFAKF,6BACE,cAAC,IAAD,CAAMZ,UAAU,yBAAyB2B,GAAIf,EAA7C,oDCgBGgB,MA7Cf,WACE,IAAMR,EAAW1B,qBAAWV,GAAYoC,SADxB,EAGwBS,oBAAS,GAHjC,mBAGTC,EAHS,KAGKC,EAHL,OAIgBF,mBAC9BG,OAAOC,YAPc,KAEP,mBAITf,EAJS,KAICgB,EAJD,KAQVC,EAAeC,uBAAY,WAC/B,IAAMC,EAAcL,OAAOC,YAXN,IAYjBI,IAAgBnB,GAClBgB,EAAYG,KAEb,CAACnB,IAYJ,OAVAoB,qBAAU,WAGR,OAFAN,OAAOO,iBAAiB,SAAUJ,GAE3B,kBAAMH,OAAOQ,oBAAoB,SAAUL,MACjD,CAACA,IAOF,yBAAQnC,UAAU,SAAlB,UACE,sBAAKA,UAAU,qBAAf,UACE,qBAAKA,UAAU,eAAeC,IAAKwC,EAAYvC,IAAI,yEAClDkB,EACC,qBACEpB,UAAS,+BAA0B8B,EAAe,yBAA2B,IAC7E3B,QAXgB,WACxB4B,GAAiBD,IAQX,SAIE,sBAAM9B,UAAS,6BAAwB8B,EAAe,8BAAgC,QAGxF,cAAC,EAAD,CAAYZ,UAAU,EAAOC,YAAY,EAAOC,UAAU,OAG7DA,GAAY,cAAC,EAAD,CAAYF,SAAUA,EAAUC,YAAaW,EAAcV,SAAUA,QCxCzEsB,MARf,WACE,OACE,wBAAQ1C,UAAU,SAAlB,SACE,oBAAGA,UAAU,oBAAb,mBAAyC,IAAI2C,MAAOC,cAApD,sBCiESC,MA7Df,SAAc1D,GAAQ,IAElB2D,EAOE3D,EAPF2D,MACAC,EAME5D,EANF4D,cACAC,EAKE7D,EALF6D,UACAC,EAIE9D,EAJF8D,aACA7C,EAGEjB,EAHFiB,YACAE,EAEEnB,EAFFmB,WACAG,EACEtB,EADFsB,aAGIhB,EAAcC,qBAAWV,GAAYS,YACrC2B,EAAW1B,qBAAWV,GAAYoC,SAExC,OACE,qCACE,cAAC,EAAD,CAAQA,SAAUA,IAClB,uBAAMpB,UAAU,UAAhB,UACE,0BAASA,UAAU,UAAnB,UACE,wBAAQA,UAAU,8BAA8BK,KAAK,SAASE,aAAW,wFAAkBJ,QAAS8C,EAApG,SACE,qBAAKjD,UAAU,kBAAkBC,IAAG,OAAER,QAAF,IAAEA,OAAF,EAAEA,EAAayD,OAAQhD,IAAI,2CAEjE,sBAAKF,UAAU,gBAAf,UACE,sBAAKA,UAAU,qBAAf,UACE,oBAAIA,UAAU,gBAAd,gBAA+BP,QAA/B,IAA+BA,OAA/B,EAA+BA,EAAaJ,OAC5C,wBAAQW,UAAU,sCAAsCK,KAAK,SAASE,aAAW,4HAAwBJ,QAAS4C,OAEpH,mBAAG/C,UAAU,eAAb,gBAA6BP,QAA7B,IAA6BA,OAA7B,EAA6BA,EAAa0D,WAE5C,wBAAQnD,UAAU,kCAAkCK,KAAK,SAASE,aAAW,oGAAoBJ,QAAS6C,OAG5G,yBAAShD,UAAU,QAAnB,SACE,oBAAIA,UAAU,cAAd,SACG8C,EAAMM,KAAI,SAAAC,GAAI,OACb,cAAC,EAAD,CAEEjE,KAAMiE,EACNjD,YAAaA,EACbE,WAAYA,EACZG,aAAcA,GAJT4C,EAAKzD,eAUpB,cAAC,EAAD,QCxBS0D,MA3Bf,SAAoBnE,GAAQ,IAExBkE,EAEElE,EAFFkE,KACAE,EACEpE,EADFoE,QAGF,OACE,yBAASvD,UAAS,8CAAyCqD,EAAO,eAAiB,IAAnF,SACE,sBAAKrD,UAAU,mBAAf,UACE,yBAAQA,UAAU,yBAAlB,UACE,qBAAKA,UAAU,eAAeC,IAAG,OAAEoD,QAAF,IAAEA,OAAF,EAAEA,EAAM/D,KAAMY,IAAG,OAAEmD,QAAF,IAAEA,OAAF,EAAEA,EAAMhE,OAC1D,4BAAYW,UAAU,uBAAtB,gBAA8CqD,QAA9C,IAA8CA,OAA9C,EAA8CA,EAAMhE,UAEtD,wBAAQW,UAAU,6BAA6BK,KAAK,SAASE,aAAW,6CAAUJ,QAASoD,UCsBpFC,MAnCf,SAAuBrE,GAAQ,IAE3BsE,EAOEtE,EAPFsE,OACAF,EAMEpE,EANFoE,QACAG,EAKEvE,EALFuE,SACArE,EAIEF,EAJFE,KACAsE,EAGExE,EAHFwE,MACAC,EAEEzE,EAFFyE,iBACAC,EACE1E,EADF0E,SAGF,OACE,yBAAS7D,UAAS,sBAAiBX,GAAjB,OAAwBoE,EAAS,gBAAkB,IAArE,SACE,sBAAKzD,UAAU,mBAAf,UACE,uBAAMA,UAAS,oBAAeX,GAAQA,KAAI,eAAUA,GAAQqE,SAAUA,EAAtE,UACE,oBAAI1D,UAAU,gBAAd,SAA+B2D,IAC9BE,EACD,wBAAQ7D,UAAU,sBAAsBK,KAAK,SAA7C,SAAuDuD,OAEzD,wBAAQ5D,UAAU,6BAA6BK,KAAK,SAASE,aAAW,6CAAUJ,QAASoD,UCwCpFO,MAxDf,SAA0B3E,GAAQ,IAE9BsE,EAGEtE,EAHFsE,OACAF,EAEEpE,EAFFoE,QACAQ,EACE5E,EADF4E,aAJ6B,EAOPlC,mBAAS,IAPF,mBAOxBxC,EAPwB,KAOlB2E,EAPkB,OAQOnC,mBAAS,IARhB,mBAQxBoC,EARwB,KAQXC,EARW,KAUzBzE,EAAcC,qBAAWV,GAAYS,YAyB3C,OAvBA6C,qBAAU,WACR0B,EAAQvE,EAAYJ,MACpB6E,EAAezE,EAAY0D,SAC1B,CAAC1D,IAqBF,eAAC,EAAD,CACEgE,OAAQA,EACRF,QAlBgB,WAClBS,EAAQvE,EAAYJ,MACpB6E,EAAezE,EAAY0D,OAC3BI,KAgBEG,SAbiB,SAACS,GACpBA,EAAIC,iBAEJL,EAAa,CACX1E,OACA8D,MAAOc,KASP5E,KAAK,UACLsE,MAAM,4HACNC,iBAAiB,yDANnB,UAQE,uBAAO5D,UAAU,cAAcK,KAAK,OAAOhB,KAAK,eAAegF,MAAOhF,GAAQ,GAAIiF,SA3B7D,SAACH,GAAD,OAASH,EAAQG,EAAII,OAAOF,QA2B6DG,YAAY,qBAAMC,UAAW,EAAGC,UAAW,GAAIC,UAAQ,IACrK,uBAAO3E,UAAU,cAAcK,KAAK,OAAOhB,KAAK,cAAcgF,MAAOJ,GAAe,GAAIK,SA3B5D,SAACH,GAAD,OAASD,EAAeC,EAAII,OAAOF,QA2B4DG,YAAY,kCAASC,UAAW,EAAGC,UAAW,IAAKC,UAAQ,QCN7KC,MAxCf,SAAyBzF,GAAQ,IAE7BsE,EAGEtE,EAHFsE,OACAF,EAEEpE,EAFFoE,QACAsB,EACE1F,EADF0F,eAGIC,EAAYC,mBAalB,OAXAzC,qBAAU,WACHmB,IACHqB,EAAUE,QAAQX,MAAQ,MAE3B,CAACZ,IAQF,cAAC,EAAD,CACEA,OAAQA,EACRF,QAASA,EACTG,SATiB,SAACS,GACpBA,EAAIC,iBACJS,EAAeC,EAAUE,QAAQX,QAQ/BhF,KAAK,SACLsE,MAAM,wFACNC,iBAAiB,yDANnB,SAQE,uBAAO5D,UAAU,cAAcK,KAAK,MAAMhB,KAAK,cAAcmF,YAAY,yFAAmBS,IAAKH,EAAWH,UAAQ,OCiB3GO,MA9Cf,SAAuB/F,GAAQ,IAE3BsE,EAGEtE,EAHFsE,OACAF,EAEEpE,EAFFoE,QACAP,EACE7D,EADF6D,UAJ0B,EAOJnB,mBAAS,IAPL,mBAOrBxC,EAPqB,KAOf2E,EAPe,OAQJnC,mBAAS,IARL,mBAQrBvC,EARqB,KAQf6F,EARe,KAyB5B,OAZA7C,qBAAU,WACHmB,IACHO,EAAQ,IACRmB,EAAQ,OAET,CAAC1B,IAQF,eAAC,EAAD,CACEA,OAAQA,EACRF,QAASA,EACTG,SATiB,SAACS,GACpBA,EAAIC,iBACJpB,EAAU,CAAE3D,OAAKC,UAQfD,KAAK,OACLsE,MAAM,gEACNC,iBAAiB,6CANnB,UAQE,uBAAO5D,UAAU,cAAcK,KAAK,OAAOhB,KAAK,YAAYgF,MAAOhF,GAAQ,GAAIiF,SAxB1D,SAACH,GAAD,OAASH,EAAQG,EAAII,OAAOF,QAwB0DG,YAAY,mDAAWC,UAAW,EAAGC,UAAW,GAAIC,UAAQ,IACvK,uBAAO3E,UAAU,cAAcK,KAAK,MAAMhB,KAAK,YAAYgF,MAAO/E,GAAQ,GAAIgF,SAxBzD,SAACH,GAAD,OAASgB,EAAQhB,EAAII,OAAOF,QAwByDG,YAAY,qGAAqBG,UAAQ,QCvC1I,MAA0B,wCCA1B,MAA0B,wCC8B1BS,EA1BK,SAACjG,GAAW,IAE5BsE,EAGEtE,EAHFsE,OACA4B,EAEElG,EAFFkG,QACA9B,EACEpE,EADFoE,QAGF,OACE,yBAASvD,UAAS,eAAUyD,EAAS,gBAAkB,IAAvD,SACE,sBAAKzD,UAAU,mBAAf,UACE,sBAAKA,UAAU,UAAf,UACE,qBAAKA,UAAU,iBAAiBC,IAAKoF,EAAUC,EAAaC,EAAYrF,IAAKmF,EAAU,uCAAW,mCAClG,mBAAGrF,UAAU,mBAAb,SAAiCqF,EAAU,sMAA6C,6KAE1F,wBAAQrF,UAAU,6BAA6BK,KAAK,SAASE,aAAW,6CAAUJ,QAASoD,U,uBCyBpF,M,WAxCb,WAAYiC,GAAU,IAAD,gCAmBrBC,UAAY,SAACpE,EAAOqE,GAClB,OAAO,EAAKC,gBAAgBC,MAAM,GAAD,OAAIlF,EAAYC,QAAhB,WAAkC,CACjEkF,OAAQ,OACRC,QAAS,CACP,eAAgB,oBAElBC,KAAMC,KAAKC,UAAU,CAAC5E,QAAOqE,iBAzBZ,KA6BrBQ,WAAa,SAACC,GACZ,OAAO,EAAKR,gBAAgBC,MAAM,GAAD,OAAIlF,EAAYC,QAAhB,aAAoC,CACnEkF,OAAQ,MACRC,QAAS,CACP,eAAgB,mBAChB,cAAgB,UAAhB,OAA2BK,QAjC/BC,KAAKC,SAAWb,EAAQ7E,Q,mDAG1B,SAAgB2F,GACd,OAAOA,EACJC,MAAK,SAAAC,GAAG,OAAIA,EAAIC,GAAKD,EAAIE,OAASC,QAAQC,OAAR,gDAA0BJ,EAAIK,c,sBAGrE,SAASxF,EAAOqE,GACd,OAAOU,KAAKT,gBAAgBC,MAAM,GAAD,OAAIlF,EAAYC,QAAhB,WAAkC,CACjEkF,OAAQ,OACRC,QAAS,CACP,eAAgB,oBAElBC,KAAMC,KAAKC,UAAU,CAAC5E,QAAOqE,oB,KAyBpB,CAAShF,GCyCToG,EA7EE,WACf,IAAMC,EAAkBrH,qBAAWV,GAAY+H,gBAEzCjG,EAAMC,cAHS,EAKmBc,mBAAS,IAL5B,mBAKdmF,EALc,KAKAC,EALA,KAMfC,EAAe,SAAC/C,GACpB8C,EAAgB,2BACXD,GADU,kBAEZ7C,EAAII,OAAOlF,KAAO8E,EAAII,OAAOF,UAkBlC,OACE,qCACE,cAAC,EAAD,IACA,0BAASrE,UAAU,WAAnB,UACE,uBACEA,UAAU,uBACVX,KAAK,gBACLqE,SArBa,SAACS,GACpBA,EAAIC,iBAEJ+C,EACGC,SAASJ,EAAa3F,MAAO2F,EAAatB,UAC1Ca,MAAK,WACJzF,EAAIU,KAAKZ,GACTmG,GAAgB,MAEjBM,OAAM,WACLN,GAAgB,OAQhB,UAKE,oBAAI/G,UAAU,yCAAd,gFAGA,uBACEA,UAAU,qCACVX,KAAK,QACLgB,KAAK,QACLmE,YAAY,QACZH,MAAO2C,EAAa3F,OAAS,GAC7BiD,SAAU4C,EACVvC,UAAQ,IAEV,uBACE3E,UAAU,qCACVX,KAAK,WACLgB,KAAK,WACLmE,YAAY,uCACZC,UAAW,EACXC,UAAW,GACXL,MAAO2C,EAAatB,UAAY,GAChCpB,SAAU4C,EACVvC,UAAQ,IAEV,wBACE3E,UAAU,qDACVK,KAAK,SAFP,6HAOF,sBAAKL,UAAU,mBAAf,UACE,mBAAGA,UAAU,qBAAb,kIACA,cAAC,IAAD,CAAMA,UAAU,sBAAsB2B,GAAIf,EAA1C,sDCEK0G,EAxED,WACZ,IAAMP,EAAkBrH,qBAAWV,GAAY+H,gBACzCQ,EAAc7H,qBAAWV,GAAYuI,YAFzB,EAIgB1F,mBAAS,IAJzB,mBAIX2F,EAJW,KAIAC,EAJA,KAKZP,EAAe,SAAC/C,GACpBsD,EAAa,2BACRD,GADO,kBAETrD,EAAII,OAAOlF,KAAO8E,EAAII,OAAOF,UAsBlC,OACE,qCACE,cAAC,EAAD,IACA,yBAASrE,UAAU,QAAnB,SACE,uBACEA,UAAU,uBACVX,KAAK,aACLqE,SAzBa,SAACS,GACpBA,EAAIC,iBAEJ+C,EAAK1B,UAAU+B,EAAUnG,MAAOmG,EAAU9B,UACzCa,MAAK,SAAAnH,GACAA,EAAK+G,OACPsB,EAAa,IACbnG,aAAaoG,QAAQ,MAAOtI,EAAK+G,OACjCoB,KAEAR,GAAgB,MAGnBM,OAAM,WACLN,GAAgB,OAQd,UAKE,oBAAI/G,UAAU,yCAAd,sCACA,uBACEA,UAAU,qCACVX,KAAK,QACLgB,KAAK,QACLmE,YAAY,QACZH,MAAOmD,EAAUnG,OAAS,GAC1BiD,SAAU4C,EACVvC,UAAQ,IAEV,uBACE3E,UAAU,qCACVX,KAAK,WACLgB,KAAK,WACLmE,YAAY,uCACZC,UAAW,EACXC,UAAW,GACXL,MAAOmD,EAAU9B,UAAY,GAC7BpB,SAAU4C,EACVvC,UAAQ,IAEV,wBACE3E,UAAU,qDACVK,KAAK,SAFP,qD,QC9CKsH,EAfQ,SAAC,GAA6C,IAAhCC,EAA+B,EAA1CC,UAAyBC,EAAiB,6BAC5D1G,EAAW0G,EAAW1G,SAE5B,OACE,cAAC,IAAD,UACGA,EAAW,cAACwG,EAAD,eAAeE,IAAiB,cAAC,IAAD,CAAUnG,GAAIf,OCoEjD,M,WA1Eb,WAAY4E,GAAU,oBACpBY,KAAKC,SAAWb,EAAQ7E,QACxByF,KAAK2B,SAAWvC,EAAQM,Q,mDAG1B,SAAgBQ,GACd,OAAOA,EACJC,MAAK,SAAAC,GAAG,OAAIA,EAAIC,GAAKD,EAAIE,OAASC,QAAQC,OAAR,gDAA0BJ,EAAIK,c,yBAGrE,WACE,OAAOT,KAAKT,gBAAgBC,MAAM,GAAD,OAAIQ,KAAKC,SAAT,aAA8B,CAC7DP,QAASM,KAAK2B,c,yBAIlB,SAAY1I,EAAM8D,GAChB,OAAOiD,KAAKT,gBAAgBC,MAAM,GAAD,OAAIQ,KAAKC,SAAT,aAA8B,CAC7DR,OAAQ,QACRC,QAASM,KAAK2B,SACdhC,KAAMC,KAAKC,UAAU,CACnB5G,KAAMA,EACN8D,MAAOA,S,2BAKb,SAAcD,GACZ,OAAOkD,KAAKT,gBAAgBC,MAAM,GAAD,OAAIQ,KAAKC,SAAT,oBAAqC,CACpER,OAAQ,QACRC,QAASM,KAAK2B,SACdhC,KAAMC,KAAKC,UAAU,CACnB/C,OAAQA,S,6BAKd,WACE,OAAOkD,KAAKT,gBAAgBC,MAAM,GAAD,OAAIQ,KAAKC,SAAT,UAA2B,CAC1DP,QAASM,KAAK2B,c,qBAIlB,SAAQ1I,EAAMC,GACZ,OAAO8G,KAAKT,gBAAgBC,MAAM,GAAD,OAAIQ,KAAKC,SAAT,UAA2B,CAC1DR,OAAQ,OACRC,QAASM,KAAK2B,SACdhC,KAAMC,KAAKC,UAAU,CACnB5G,KAAMA,EACNC,KAAMA,S,wBAKZ,SAAW0I,GACT,OAAO5B,KAAKT,gBAAgBC,MAAM,GAAD,OAAIQ,KAAKC,SAAT,kBAA2B2B,GAAU,CACpEnC,OAAQ,SACRC,QAASM,KAAK2B,c,kCAIlB,SAAqBC,EAAQnI,GAC3B,OAAOA,EACHuG,KAAKT,gBAAgBC,MAAM,GAAD,OAAIQ,KAAKC,SAAT,wBAAiC2B,GAAU,CACrEnC,OAAQ,SACRC,QAASM,KAAK2B,YAEd3B,KAAKT,gBAAgBC,MAAM,GAAD,OAAIQ,KAAKC,SAAT,wBAAiC2B,GAAU,CACnEnC,OAAQ,MACRC,QAASM,KAAK2B,gB,KAKT,CjB7EW,CACxBpH,QAAS,8CACTmF,QAAS,CACPmC,cAAe,uCACf,eAAgB,sBkB4KLC,MA/Jf,WACE,IAAMpH,EAAMC,cADC,EAGyBc,mBAAS,IAHlC,mBAGNpC,EAHM,KAGO0I,EAHP,OAIatG,mBAAS,IAJtB,mBAINiB,EAJM,KAICsF,EAJD,OAMuCvG,oBAAS,GANhD,mBAMNwG,EANM,KAMcC,EANd,OAOiCzG,oBAAS,GAP1C,mBAON0G,EAPM,KAOWC,EAPX,OAQqC3G,oBAAS,GAR9C,mBAQN4G,EARM,KAQaC,EARb,OASqC7G,oBAAS,GAT9C,mBASN8G,EATM,KASaC,EATb,OAU2B/G,mBAAS,MAVpC,mBAUNgH,EAVM,KAUQC,EAVR,OAWmBjH,oBAAS,GAX5B,mBAWNT,EAXM,KAWI2H,EAXJ,QAYiBlH,oBAAS,GAZ1B,qBAYNwD,GAZM,MAYG2D,GAZH,MAkBPC,GAAiB,WACrBX,GAAsB,GACtBE,GAAmB,GACnBE,GAAqB,GACrBE,GAAqB,GACrBE,EAAgB,OAGZ/B,GAAkB,SAAC1B,GACvB2D,GAAW3D,GACXuD,GAAqB,IAGjBM,GAAW9G,uBAAY,WAC3B,IAAM+G,EAAM7H,aAAa8H,QAAQ,OAEjC,GAAID,EAAK,CACP,IAAME,EAAW,CAAClC,EAAKjB,WAAWiD,GAAMG,EAAIC,cAAeD,EAAIE,mBAE/D7C,QAAQ8C,IAAIJ,GACX9C,MAAK,YAAyC,IAAD,mBAAtCmD,EAAsC,KAA5BC,EAA4B,KAAlBC,EAAkB,KAC5CzB,EAAe,2BACVwB,GADS,IAEZtI,MAAOqI,EAAStK,KAAKiC,SAEvB+G,EAASwB,GACTb,GAAY,GACZjI,EAAIU,KAAKZ,MAEVyG,OAAM,kBAAMN,IAAgB,SAE9B,CAACjG,IAsDJ,OApDAwB,qBAAU,WACR4G,OACC,CAACA,GAAUpI,IAmDZ,eAAC9B,EAAW6K,SAAZ,CAAqBxF,MAAO,CAAC5E,cAAa2B,WAAU2F,mBAAiBQ,YAjDnD,kBAAM2B,MAiD0DjI,aAhD/D,kBAAM8H,GAAY,KAgDrC,UACE,eAAC,IAAD,WACE,cAAC,EAAD,CACEe,OAAK,EACLC,KAAMnJ,EACNQ,SAAUA,EACV0B,MAAOA,EACPC,cAjG6B,kBAAMuF,GAAsB,IAkGzDtF,UAjGyB,kBAAMwF,GAAmB,IAkGlDvF,aAjG4B,kBAAMyF,GAAqB,IAkGvDtI,YAAa0I,EACbxI,WAzDe,SAAC+C,GACtB,IAAMxD,EAAUwD,EAAK9D,MAAMO,MAAK,SAAAC,GAAI,OAAIA,EAAKH,MAAQH,EAAYG,OAEjE0J,EAAIU,qBAAqB3G,EAAKzD,IAAKC,GAChC0G,MAAK,SAAA0D,GACJ7B,GAAS,SAAAtF,GAAK,OAAIA,EAAMM,KAAI,SAAA8G,GAAQ,OAAIA,EAAStK,MAAQyD,EAAKzD,IAAMqK,EAAUC,WAE/E7C,OAAM,SAAA8C,GAAG,OAAIC,QAAQC,IAAIF,OAmDtB1J,aAhDiB,SAAC4C,GACxBiG,EAAIgB,WAAWjH,EAAKzD,KACjB2G,MAAK,WACJ6B,EAAStF,EAAMyH,QAAO,SAAAL,GAAQ,OAAIA,EAAStK,MAAQyD,EAAKzD,WAEzDyH,OAAM,SAAA8C,GAAG,OAAIC,QAAQC,IAAIF,OA4CtBtC,UAAWhF,IAEb,cAAC,IAAD,CAAOiH,OAAK,EAACC,KAAMnJ,EAAnB,SACE,cAAC,EAAD,MAEF,cAAC,IAAD,CAAOkJ,OAAK,EAACC,KAAMnJ,EAAnB,SACE,cAAC,EAAD,SAIJ,cAAC,EAAD,CACE6C,OAAQ4E,EACR9E,QAAS0F,GACTlF,aAtDmB,SAAC,GAAmB,IAAlB1E,EAAiB,EAAjBA,KAAM8D,EAAW,EAAXA,MAC/BmG,EAAIkB,YAAYnL,EAAM8D,GACrBoD,MAAK,SAAAoD,GACJxB,EAAewB,GACfV,QAED5B,OAAM,SAAA8C,GAAG,OAAIC,QAAQC,IAAIF,SAmDxB,cAAC,EAAD,CACE1G,OAAQ8E,EACRhF,QAAS0F,GACTjG,UA1CgB,SAAC,GAAkB,IAAjB3D,EAAgB,EAAhBA,KAAMC,EAAU,EAAVA,KAC5BgK,EAAImB,QAAQpL,EAAMC,GACfiH,MAAK,SAAA0D,GACJ7B,EAAS,CAAC6B,GAAF,mBAAcnH,KACtBmG,QAED5B,OAAM,SAAA8C,GAAG,OAAIC,QAAQC,IAAIF,SAuC1B,cAAC,EAAD,CACE1G,OAAQgF,EACRlF,QAAS0F,GACTpE,eAzDqB,SAAC3B,GAC1BoG,EAAIoB,cAAcxH,GACfqD,MAAK,SAAAoD,GACJxB,EAAewB,GACfV,QAED5B,OAAM,SAAA8C,GAAG,OAAIC,QAAQC,IAAIF,SAsD1B,cAAC,EAAD,CACE9G,KAAMwF,EACNtF,QAAS0F,KAGX,cAAC,EAAD,CACExF,OAAQkF,EACRtD,QAASA,GACT9B,QAAS0F,SCpKjB0B,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,IAAD,UACE,cAAC,EAAD,QAGJC,SAASC,eAAe,W","file":"static/js/main.e886ec7e.chunk.js","sourcesContent":["import { createContext } from 'react';\n\nexport const AppContext = createContext();\n","import { useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport { AppContext } from '../contexts/AppContext';\n\nfunction Card(props) {\n  const {\n    name,\n    link,\n    likes,\n    owner\n  } = props.data;\n\n  const currentUser = useContext(AppContext).currentUser;\n\n  const isOwn = owner._id === currentUser._id;\n  const isLiked = likes.some(like => like._id === currentUser._id);\n\n  const handleCardClick = () => props.onCardClick({ name, link });\n  const handleLikeClick = () => props.onCardLike(props.data);\n  const handleDeleteClick = () => props.onCardDelete(props.data);\n\n  return (\n    <li className='cards__item'>\n      <img className='cards__image' src={link} alt={name} onClick={handleCardClick} />\n      <h2 className='cards__title'>{name}</h2>\n        <div className='cards__like-container'>\n          <button\n            className={`cards__button-like ${isLiked ? ' cards__button-like_active' : ''}`}\n            type='button'\n            onClick={handleLikeClick}\n            aria-label='Оценить'\n          >\n          </button>\n          <span className='cards__like-counter'>{likes.length}</span>\n        </div>\n      {isOwn &&\n        <button\n          className='button cards__button-delete'\n          type='button'\n          onClick={handleDeleteClick}\n          aria-label='Удалить'>\n        </button>}\n    </li>\n  );\n}\n\nCard.propTypes = {\n  data: PropTypes.object.isRequired,\n  onCardClick: PropTypes.func.isRequired,\n  onCardLike: PropTypes.func.isRequired,\n  onCardDelete: PropTypes.func.isRequired\n};\n\nexport default Card;\n","export default __webpack_public_path__ + \"static/media/header-logo.bbe2a6ea.svg\";","export const apiOptions = {\n  baseUrl: 'https://mesto.nomoreparties.co/v1/cohort-26',\n  headers: {\n    authorization: '367be849-b9d8-44df-8a90-129746dbd13f',\n    'Content-Type': 'application/json'\n  }\n}\n\nexport const authOptions = {\n  baseUrl: 'https://auth.nomoreparties.co'\n}\n\nexport const appRoutes = {\n  root: '/',\n  signIn: '/sign-in',\n  signUp: '/sign-up'\n}\n","import { Link, useHistory } from 'react-router-dom';\nimport { appRoutes } from '../utils/constants';\nimport PropTypes from 'prop-types';\nimport { useContext } from 'react';\nimport { AppContext } from '../contexts/AppContext';\n\nconst HeaderMenu = (props) => {\n  const hst = useHistory();\n  const user = useContext(AppContext).currentUser;\n  const handleLogout = useContext(AppContext).handleLogout;\n\n  const { isMobile, isInactive, loggedIn } = props;\n\n  const signOut = () => {\n    localStorage.removeItem('jwt');\n    handleLogout();\n    hst.push(appRoutes.signIn);\n  }\n\n  return (\n    <nav\n      className={`header__menu${\n        isInactive && isMobile ? ' header__menu_inactive' : ''\n      }${isMobile ? ' header__menu_mobile' : ''}`}\n    >\n      {loggedIn && <h2 className='header__menu-heading'>{user.email}</h2>}\n      <ul className='header__menu-links'>\n        {loggedIn ? (\n          <li><button className='link header__menu-link header__menu-button' onClick={signOut}>Выйти</button></li>\n        ) : hst.location.pathname === appRoutes.signIn ? (\n          <li>\n            <Link className='link header__menu-link' to={appRoutes.signUp}>\n              Регистрация\n            </Link>\n          </li>\n        ) : (\n          <li>\n            <Link className='link header__menu-link' to={appRoutes.signIn}>\n              Войти\n            </Link>\n          </li>\n        )}\n      </ul>\n    </nav>\n  );\n};\n\nHeaderMenu.propTypes = {\n  isMobile: PropTypes.bool.isRequired,\n  isInactive: PropTypes.bool.isRequired,\n  loggedIn: PropTypes.bool.isRequired,\n};\n\nexport default HeaderMenu;\n","import { useState, useEffect, useCallback } from 'react';\nimport headerLogo from '../images/header-logo.svg';\nimport HeaderMenu from './HeaderMenu';\nimport { useContext } from 'react';\nimport { AppContext } from '../contexts/AppContext';\n\nconst MAX_MOBILE_WIDTH = 767;\n\nfunction Header() {\n  const loggedIn = useContext(AppContext).loggedIn;\n\n  const [isActiveMenu, setIsActiveMenu] = useState(false);\n  const [isMobile, setIsMobile] = useState(\n    window.innerWidth <= MAX_MOBILE_WIDTH\n  );\n\n  const resizeWindow = useCallback(() => {\n    const isMobileNew = window.innerWidth <= MAX_MOBILE_WIDTH;\n    if (isMobileNew !== isMobile) {\n      setIsMobile(isMobileNew);\n    }\n  }, [isMobile]);\n\n  useEffect(() => {\n    window.addEventListener('resize', resizeWindow);\n\n    return () => window.removeEventListener('resize', resizeWindow);\n  }, [resizeWindow]);\n\n  const handleBurgerClick = () => {\n    setIsActiveMenu(!isActiveMenu);\n  };\n\n  return (\n    <header className='header'>\n      <div className='header__containter'>\n        <img className='header__logo' src={headerLogo} alt='Место: Россия' />\n        {loggedIn ? (\n          <div\n            className={`button header__burger${isActiveMenu ? ' header__burger_active' : ''}`}\n            onClick={handleBurgerClick}\n          >\n            <span className={`header__burger-item${isActiveMenu ? ' header__burger-item_active' : ''}`}></span>\n          </div>\n        ) : (\n          <HeaderMenu isMobile={false} isInactive={false} loggedIn={false} />\n        )}\n      </div>\n      {loggedIn && <HeaderMenu isMobile={isMobile} isInactive={!isActiveMenu} loggedIn={loggedIn} />}\n    </header>\n  );\n}\n\nexport default Header;\n","function Footer() {\n  return (\n    <footer className='footer'>\n      <p className='footer__copyright'>&copy; {new Date().getFullYear()} Mesto Russia</p>\n    </footer>\n  );\n}\n\nexport default Footer;\n","import { useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport Card from './Card';\nimport Header from './Header';\nimport Footer from './Footer';\nimport { AppContext } from '../contexts/AppContext';\n\nfunction Main(props) {\n  const {\n    cards,\n    onEditProfile,\n    onAddCard,\n    onEditAvatar,\n    onCardClick,\n    onCardLike,\n    onCardDelete\n  } = props;\n\n  const currentUser = useContext(AppContext).currentUser;\n  const loggedIn = useContext(AppContext).loggedIn;\n\n  return (\n    <>\n      <Header loggedIn={loggedIn} />\n      <main className='content'>\n        <section className='profile'>\n          <button className='profile__button-edit-avatar' type='button' aria-label='Обновить аватар' onClick={onEditAvatar}>\n            <img className='profile__avatar' src={currentUser?.avatar} alt='Аватар' />\n          </button>\n          <div className='profile__info'>\n            <div className='profile__container'>\n              <h1 className='profile__name'>{currentUser?.name}</h1>\n              <button className='button profile__button-edit-profile' type='button' aria-label='Редактировать профиль' onClick={onEditProfile}></button>\n            </div>\n            <p className='profile__job'>{currentUser?.about}</p>\n          </div>\n          <button className='button profile__button-add-card' type='button' aria-label='Добавить карточку' onClick={onAddCard}></button>\n        </section>\n\n        <section className='cards'>\n          <ul className='cards__list'>\n            {cards.map(card => (\n              <Card\n                key={card._id}\n                data={card}\n                onCardClick={onCardClick}\n                onCardLike={onCardLike}\n                onCardDelete={onCardDelete}\n              />\n            ))}\n          </ul>\n        </section>\n      </main>\n      <Footer />\n    </>\n  );\n}\n\nMain.propTypes = {\n  cards: PropTypes.array.isRequired,\n  onEditProfile: PropTypes.func.isRequired,\n  onAddCard: PropTypes.func.isRequired,\n  onEditAvatar: PropTypes.func.isRequired,\n  onCardClick: PropTypes.func.isRequired,\n  onCardLike: PropTypes.func.isRequired,\n  onCardDelete: PropTypes.func.isRequired\n};\n\nexport default Main;\n","import PropTypes from 'prop-types';\r\n\r\nfunction ImagePopup(props) {\r\n  const {\r\n    card,\r\n    onClose,\r\n  } = props;\r\n\r\n  return (\r\n    <section className={`popup popup-image popup_theme_black ${card ? 'popup_opened' : ''}`}>\r\n      <div className='popup__container'>\r\n        <figure className='popup__image-container'>\r\n          <img className='popup__image' src={card?.link} alt={card?.name} />\r\n          <figcaption className='popup__image-caption'>{card?.name}</figcaption>\r\n        </figure>\r\n        <button className='button popup__button-close' type='button' aria-label='Закрыть' onClick={onClose}></button>\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n\r\nImagePopup.propTypes = {\r\n  card: PropTypes.shape({\r\n    name: PropTypes.string.isRequired,\r\n    link: PropTypes.string.isRequired,\r\n  }),\r\n  onClose: PropTypes.func.isRequired\r\n};\r\n\r\nexport default ImagePopup;\r\n","import PropTypes from 'prop-types';\n\nfunction PopupWithForm(props) {\n  const {\n    isOpen,\n    onClose,\n    onSubmit,\n    name,\n    title,\n    btnSubmitCaption,\n    children\n  } = props;\n\n  return (\n    <section className={`popup popup-${name}${isOpen ? ' popup_opened' : ''}`}>\n      <div className='popup__container'>\n        <form className={`form form-${name}`} name={`form-${name}`} onSubmit={onSubmit}>\n          <h2 className='form__heading'>{title}</h2>\n          {children}\n          <button className='form__button-submit' type='submit'>{btnSubmitCaption}</button>\n        </form>\n        <button className='button popup__button-close' type='button' aria-label='Закрыть' onClick={onClose}></button>\n      </div>\n    </section>\n  );\n}\n\nPopupWithForm.propTypes = {\n  isOpen: PropTypes.bool.isRequired,\n  onClose: PropTypes.func.isRequired,\n  onSubmit: PropTypes.func.isRequired,\n  name: PropTypes.string.isRequired,\n  title: PropTypes.string.isRequired,\n  btnSubmitCaption: PropTypes.string.isRequired,\n  children: PropTypes.node\n};\n\nexport default PopupWithForm;\n","import { useEffect, useState, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport PopupWithForm from './PopupWithForm';\nimport { AppContext } from '../contexts/AppContext';\n\nfunction EditProfilePopup(props) {\n  const {\n    isOpen,\n    onClose,\n    onUpdateUser\n  } = props;\n\n  const [name, setName] = useState('');\n  const [description, setDescription] = useState('');\n\n  const currentUser = useContext(AppContext).currentUser;\n\n  useEffect(() => {\n    setName(currentUser.name);\n    setDescription(currentUser.about);\n  }, [currentUser]);\n\n  const handleNameChange = (evt) => setName(evt.target.value);\n  const handleDescriptionChange = (evt) => setDescription(evt.target.value);\n\n  const handleClose = () => {\n    setName(currentUser.name);\n    setDescription(currentUser.about);\n    onClose();\n  }\n\n  const handleSubmit = (evt) => {\n    evt.preventDefault();\n\n    onUpdateUser({\n      name,\n      about: description\n    });\n  }\n\n  return (\n    <PopupWithForm\n      isOpen={isOpen}\n      onClose={handleClose}\n      onSubmit={handleSubmit}\n      name='profile'\n      title='Редактировать профиль'\n      btnSubmitCaption='Сохранить'\n    >\n      <input className='form__input' type='text' name='profile-name' value={name || ''} onChange={handleNameChange} placeholder='Имя' minLength={2} maxLength={40} required />\n      <input className='form__input' type='text' name='profile-job' value={description || ''} onChange={handleDescriptionChange} placeholder='О себе' minLength={2} maxLength={200} required />\n    </PopupWithForm>\n  );\n}\n\nEditProfilePopup.propTypes = {\n  isOpen: PropTypes.bool.isRequired,\n  onClose: PropTypes.func.isRequired,\n  onUpdateUser: PropTypes.func.isRequired\n};\n\nexport default EditProfilePopup;\n","import { useEffect, useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport PopupWithForm from './PopupWithForm';\n\nfunction EditAvatarPopup(props) {\n  const {\n    isOpen,\n    onClose,\n    onUpdateAvatar\n  } = props;\n\n  const avatarRef = useRef();\n\n  useEffect(() => {\n    if (!isOpen) {\n      avatarRef.current.value = '';\n    }\n  }, [isOpen]);\n\n  const handleSubmit = (evt) => {\n    evt.preventDefault();\n    onUpdateAvatar(avatarRef.current.value);\n  }\n\n  return (\n    <PopupWithForm\n      isOpen={isOpen}\n      onClose={onClose}\n      onSubmit={handleSubmit}\n      name='avatar'\n      title='Обновить аватар'\n      btnSubmitCaption='Сохранить'\n    >\n      <input className='form__input' type='url' name='avatar-link' placeholder='Ссылка на аватар' ref={avatarRef} required />\n    </PopupWithForm>\n  );\n}\n\nEditAvatarPopup.propTypes = {\n  isOpen: PropTypes.bool.isRequired,\n  onClose: PropTypes.func.isRequired,\n  onUpdateAvatar: PropTypes.func.isRequired\n};\n\nexport default EditAvatarPopup;\n","import { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport PopupWithForm from './PopupWithForm';\n\nfunction AddPlacePopup(props) {\n  const {\n    isOpen,\n    onClose,\n    onAddCard\n  } = props;\n\n  const [name, setName] = useState('');\n  const [link, setLink] = useState('');\n\n  const handleNameChange = (evt) => setName(evt.target.value);\n  const handleLinkChange = (evt) => setLink(evt.target.value);\n\n  useEffect(() => {\n    if (!isOpen) {\n      setName('');\n      setLink('');\n    }\n  }, [isOpen]);\n\n  const handleSubmit = (evt) => {\n    evt.preventDefault();\n    onAddCard({ name,link });\n  }\n\n  return (\n    <PopupWithForm\n      isOpen={isOpen}\n      onClose={onClose}\n      onSubmit={handleSubmit}\n      name='card'\n      title='Новое место'\n      btnSubmitCaption='Создать'\n    >\n      <input className='form__input' type='text' name='card-name' value={name || ''} onChange={handleNameChange} placeholder='Название' minLength={2} maxLength={30} required />\n      <input className='form__input' type='url' name='card-link' value={link || ''} onChange={handleLinkChange} placeholder='Ссылка на картинку' required />\n    </PopupWithForm>\n  );\n}\n\nAddPlacePopup.propTypes = {\n  isOpen: PropTypes.bool.isRequired,\n  onClose: PropTypes.func.isRequired,\n  onAddCard: PropTypes.func.isRequired\n};\n\nexport default AddPlacePopup;\n","export default __webpack_public_path__ + \"static/media/res-success.1b6082f8.svg\";","export default __webpack_public_path__ + \"static/media/res-failure.df8eddf6.svg\";","import PropTypes from 'prop-types';\nimport resSuccess from '../images/res-success.svg';\nimport resFailure from '../images/res-failure.svg';\n\nconst InfoTooltip = (props) => {\n  const {\n    isOpen,\n    isError,\n    onClose\n  } = props;\n\n  return (\n    <section className={`popup${isOpen ? ' popup_opened' : ''}`}>\n      <div className='popup__container'>\n        <div className='tooltip'>\n          <img className='tooltip__image' src={isError ? resFailure : resSuccess} alt={isError ? 'Ошибка' : 'Успех'} />\n          <p className='tooltip__heading'>{isError ? 'Что-то пошло не так! Попробуйте ещё раз.' : 'Вы успешно зарегистрировались!'}</p>\n        </div>\n        <button className='button popup__button-close' type='button' aria-label='Закрыть' onClick={onClose}></button>\n      </div>\n    </section>\n  );\n}\n\nInfoTooltip.propTypes = {\n  isOpen: PropTypes.bool.isRequired,\n  isError: PropTypes.bool.isRequired,\n  onClose: PropTypes.func.isRequired\n};\n\nexport default InfoTooltip;\n","import { authOptions } from './constants';\n\nclass Auth {\n  constructor(options) {\n    this._baseUrl = options.baseUrl;\n  }\n\n  _promiseHandler(promise) {\n    return promise\n      .then(res => res.ok ? res.json() : Promise.reject(`Ошибка: ${res.status}`));\n  }\n\n  register(email, password) {\n    return this._promiseHandler(fetch(`${authOptions.baseUrl}/signup`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({email, password})\n    }));\n  }\n\n  authorize = (email, password) => {\n    return this._promiseHandler(fetch(`${authOptions.baseUrl}/signin`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({email, password})\n    }));\n  }\n\n  getContent = (token) => {\n    return this._promiseHandler(fetch(`${authOptions.baseUrl}/users/me`, {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${token}`,\n      }\n    }));\n  }\n}\n\nexport default new Auth(authOptions);\n","import { useState, useContext } from 'react';\nimport { useHistory, Link } from 'react-router-dom';\nimport auth from '../utils/auth';\nimport { AppContext } from '../contexts/AppContext';\nimport { appRoutes } from '../utils/constants';\nimport Header from './Header';\n\nconst Register = () => {\n  const showInfoToolTip = useContext(AppContext).showInfoToolTip;\n\n  const hst = useHistory();\n\n  const [registerData, setRegisterData] = useState({});\n  const handleChange = (evt) => {\n    setRegisterData({\n      ...registerData,\n      [evt.target.name]: evt.target.value,\n    });\n  };\n\n  const handleSubmit = (evt) => {\n    evt.preventDefault();\n\n    auth\n      .register(registerData.email, registerData.password)\n      .then(() => {\n        hst.push(appRoutes.signIn);\n        showInfoToolTip(false);\n      })\n      .catch(() => {\n        showInfoToolTip(true);\n      });\n  };\n\n  return (\n    <>\n      <Header />\n      <section className='register'>\n        <form\n          className='form form_theme_dark'\n          name='form-register'\n          onSubmit={handleSubmit}\n        >\n          <h2 className='form__heading form__heading_theme_dark'>\n            Регистрация\n          </h2>\n          <input\n            className='form__input form__input_theme_dark'\n            name='email'\n            type='email'\n            placeholder='Email'\n            value={registerData.email || ''}\n            onChange={handleChange}\n            required\n          />\n          <input\n            className='form__input form__input_theme_dark'\n            name='password'\n            type='password'\n            placeholder='Пароль'\n            minLength={8}\n            maxLength={15}\n            value={registerData.password || ''}\n            onChange={handleChange}\n            required\n          />\n          <button\n            className='form__button-submit form__button-submit_theme_dark'\n            type='submit'\n          >\n            Зарегистрироваться\n          </button>\n        </form>\n        <div className='register__signin'>\n          <p className='register__question'>Уже зарегистрированы?</p>\n          <Link className='link register__link' to={appRoutes.signIn}>\n            Войти\n          </Link>\n        </div>\n      </section>\n    </>\n  );\n};\n\nexport default Register;\n","import { useState, useContext } from 'react';\nimport auth from '../utils/auth';\nimport { AppContext } from '../contexts/AppContext';\nimport Header from './Header';\n\nconst Login = () => {\n  const showInfoToolTip = useContext(AppContext).showInfoToolTip;\n  const handleLogin = useContext(AppContext).handleLogin;\n\n  const [loginData, setLoginData] = useState({});\n  const handleChange = (evt) => {\n    setLoginData({\n      ...loginData,\n      [evt.target.name]: evt.target.value\n    });\n  }\n\n  const handleSubmit = (evt) => {\n    evt.preventDefault();\n\n    auth.authorize(loginData.email, loginData.password)\n    .then(data => {\n      if (data.token) {\n        setLoginData({});\n        localStorage.setItem('jwt', data.token);\n        handleLogin();\n      } else {\n        showInfoToolTip(true);\n      }\n    })\n    .catch(() => {\n      showInfoToolTip(true);\n    });\n  }\n\n  return (\n    <>\n      <Header />\n      <section className='login'>\n        <form\n          className='form form_theme_dark'\n          name='form-login'\n          onSubmit={handleSubmit}\n        >\n          <h2 className='form__heading form__heading_theme_dark'>Вход</h2>\n          <input\n            className='form__input form__input_theme_dark'\n            name='email'\n            type='email'\n            placeholder='Email'\n            value={loginData.email || ''}\n            onChange={handleChange}\n            required\n          />\n          <input\n            className='form__input form__input_theme_dark'\n            name='password'\n            type='password'\n            placeholder='Пароль'\n            minLength={8}\n            maxLength={15}\n            value={loginData.password || ''}\n            onChange={handleChange}\n            required\n          />\n          <button\n            className='form__button-submit form__button-submit_theme_dark'\n            type='submit'\n          >\n            Войти\n          </button>\n        </form>\n      </section>\n    </>\n  );\n};\n\nexport default Login;\n","import { Route, Redirect } from \"react-router-dom\";\nimport PropTypes from 'prop-types';\nimport { appRoutes } from '../utils/constants';\n\nconst ProtectedRoute = ({ component: Component, ...otherProps }) => {\n  const loggedIn = otherProps.loggedIn;\n\n  return (\n    <Route>\n      {loggedIn ? <Component {...otherProps} /> : <Redirect to={appRoutes.signIn} /> }\n    </Route>\n  );\n}\n\nProtectedRoute.propTypes = {\n  loggedIn: PropTypes.bool.isRequired,\n  component: PropTypes.func.isRequired\n};\n\nexport default ProtectedRoute;\n","import { apiOptions } from './constants';\n\nclass Api {\n  constructor(options) {\n    this._baseUrl = options.baseUrl;\n    this._headers = options.headers;\n  }\n\n  _promiseHandler(promise) {\n    return promise\n      .then(res => res.ok ? res.json() : Promise.reject(`Ошибка: ${res.status}`));\n  }\n\n  getUserInfo() {\n    return this._promiseHandler(fetch(`${this._baseUrl}/users/me`, {\n      headers: this._headers\n    }));\n  }\n\n  setUserInfo(name, about) {\n    return this._promiseHandler(fetch(`${this._baseUrl}/users/me`, {\n      method: 'PATCH',\n      headers: this._headers,\n      body: JSON.stringify({\n        name: name,\n        about: about\n      })\n    }));\n  }\n\n  setUserAvatar(avatar) {\n    return this._promiseHandler(fetch(`${this._baseUrl}/users/me/avatar`, {\n      method: 'PATCH',\n      headers: this._headers,\n      body: JSON.stringify({\n        avatar: avatar\n      })\n    }));\n  }\n\n  getInitialCards() {\n    return this._promiseHandler(fetch(`${this._baseUrl}/cards`, {\n      headers: this._headers\n    }));\n  }\n\n  addCard(name, link) {\n    return this._promiseHandler(fetch(`${this._baseUrl}/cards`, {\n      method: 'POST',\n      headers: this._headers,\n      body: JSON.stringify({\n        name: name,\n        link: link\n      })\n    }));\n  }\n\n  deleteCard(cardId) {\n    return this._promiseHandler(fetch(`${this._baseUrl}/cards/${cardId}`, {\n      method: 'DELETE',\n      headers: this._headers\n    }));\n  }\n\n  changeCardLikeStatus(cardId, isLiked) {\n    return isLiked\n      ? this._promiseHandler(fetch(`${this._baseUrl}/cards/likes/${cardId}`, {\n        method: 'DELETE',\n        headers: this._headers\n      }))\n      : this._promiseHandler(fetch(`${this._baseUrl}/cards/likes/${cardId}`, {\n          method: 'PUT',\n          headers: this._headers\n        }));\n  }\n}\n\nexport default new Api(apiOptions);\n","import { useCallback, useEffect, useState } from 'react';\nimport { Route, Switch } from 'react-router-dom';\nimport Main from './Main';\nimport ImagePopup from './ImagePopup';\nimport EditProfilePopup from './EditProfilePopup';\nimport EditAvatarPopup from './EditAvatarPopup';\nimport AddPlacePopup from './AddPlacePopup';\nimport InfoTooltip from './InfoTooltip';\nimport Register from './Register';\nimport Login from './Login';\nimport ProtectedRoute from './ProtectedRoute';\nimport api from '../utils/api';\nimport auth from '../utils/auth';\nimport { AppContext } from '../contexts/AppContext';\nimport { appRoutes } from '../utils/constants';\nimport { useHistory } from 'react-router-dom';\n\nfunction App() {\n  const hst = useHistory();\n\n  const [currentUser, setCurrentUser] = useState({});\n  const [cards, setCards] = useState([]);\n\n  const [isPopupProfileOpen, setIsPopupProfileOpen] = useState(false);\n  const [isPopupCardOpen, setIsPopupCardOpen] = useState(false);\n  const [isPopupAvatarOpen, setIsPopupAvatarOpen] = useState(false);\n  const [isInfoTooltipOpen, setIsInfoTooltipOpen] = useState(false);\n  const [selectedCard, setSelectedCard] = useState(null);\n  const [loggedIn, setLoggedIn] = useState(false);\n  const [isError, setIsError] = useState(false);\n\n  const handleButtonEditProfileClick = () => setIsPopupProfileOpen(true);\n  const handleButtonAddCardClick = () => setIsPopupCardOpen(true);\n  const handleButtonEditAvatarClick = () => setIsPopupAvatarOpen(true);\n\n  const closeAllPopups = () => {\n    setIsPopupProfileOpen(false);\n    setIsPopupCardOpen(false);\n    setIsPopupAvatarOpen(false);\n    setIsInfoTooltipOpen(false);\n    setSelectedCard(null);\n  }\n\n  const showInfoToolTip = (isError) => {\n    setIsError(isError);\n    setIsInfoTooltipOpen(true);\n  };\n\n  const loadData = useCallback(() => {\n    const jwt = localStorage.getItem('jwt');\n\n    if (jwt) {\n      const promises = [auth.getContent(jwt), api.getUserInfo(), api.getInitialCards()];\n\n      Promise.all(promises)\n      .then(([authInfo, userInfo, initialCards]) => {\n        setCurrentUser({\n          ...userInfo,\n          email: authInfo.data.email\n        });\n        setCards(initialCards);\n        setLoggedIn(true);\n        hst.push(appRoutes.root);\n      })\n      .catch(() => showInfoToolTip(true));\n    }\n  }, [hst]);\n\n  useEffect(() => {\n    loadData();\n  }, [loadData, hst]);\n\n  const handleLogin = () => loadData();\n  const handleLogout = () => setLoggedIn(false);\n\n  const handleCardLike = (card) => {\n    const isLiked = card.likes.some(like => like._id === currentUser._id);\n\n    api.changeCardLikeStatus(card._id, isLiked)\n      .then(newCard => {\n        setCards(cards => cards.map(currCard => currCard._id === card._id ? newCard : currCard));\n      })\n      .catch(err => console.log(err));\n  }\n\n  const handleCardDelete = (card) => {\n    api.deleteCard(card._id)\n      .then(() => {\n        setCards(cards.filter(currCard => currCard._id !== card._id))\n      })\n      .catch(err => console.log(err));\n  }\n\n  const handleUpdateUser = ({name, about}) => {\n    api.setUserInfo(name, about)\n    .then(userInfo => {\n      setCurrentUser(userInfo);\n      closeAllPopups();\n    })\n    .catch(err => console.log(err));\n  }\n\n  const handleUpdateAvatar = (avatar) => {\n    api.setUserAvatar(avatar)\n      .then(userInfo => {\n        setCurrentUser(userInfo);\n        closeAllPopups();\n      })\n      .catch(err => console.log(err));\n  }\n\n  const handleAddCard = ({name, link}) => {\n    api.addCard(name, link)\n      .then(newCard => {\n        setCards([newCard, ...cards]);\n        closeAllPopups();\n      })\n      .catch(err => console.log(err));\n  }\n\n  return (\n    <AppContext.Provider value={{currentUser, loggedIn, showInfoToolTip, handleLogin, handleLogout}}>\n      <Switch>\n        <ProtectedRoute\n          exact\n          path={appRoutes.root}\n          loggedIn={loggedIn}\n          cards={cards}\n          onEditProfile={handleButtonEditProfileClick}\n          onAddCard={handleButtonAddCardClick}\n          onEditAvatar={handleButtonEditAvatarClick}\n          onCardClick={setSelectedCard}\n          onCardLike={handleCardLike}\n          onCardDelete={handleCardDelete}\n          component={Main}\n        />\n        <Route exact path={appRoutes.signUp}>\n          <Register />\n        </Route>\n        <Route exact path={appRoutes.signIn}>\n          <Login />\n        </Route>\n      </Switch>\n\n      <EditProfilePopup\n        isOpen={isPopupProfileOpen}\n        onClose={closeAllPopups}\n        onUpdateUser={handleUpdateUser}\n      />\n\n      <AddPlacePopup\n        isOpen={isPopupCardOpen}\n        onClose={closeAllPopups}\n        onAddCard={handleAddCard}\n      />\n\n      <EditAvatarPopup\n        isOpen={isPopupAvatarOpen}\n        onClose={closeAllPopups}\n        onUpdateAvatar={handleUpdateAvatar}\n      />\n\n      <ImagePopup\n        card={selectedCard}\n        onClose={closeAllPopups}\n      />\n\n      <InfoTooltip\n        isOpen={isInfoTooltipOpen}\n        isError={isError}\n        onClose={closeAllPopups}\n      />\n    </AppContext.Provider>\n  );\n}\n\nexport default App;\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport './index.css';\r\nimport App from './components/App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <BrowserRouter>\r\n      <App />\r\n    </BrowserRouter>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}